{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../Documentation.svelte",
    "../../Press.svelte"
  ],
  "sourcesContent": [
    "<script>\n\nconst activeLocale = \"en\"\n\nconst books = {\n  en: [\n    {\n      id: \"getting-started\",\n      cover: \"book/images/cover.png\",\n      title: \"Getting Started With Little Webby Press\"\n    },\n    {\n      id: \"book-configuration-specification\",\n      cover: \"book/images/cover.png\",\n      title: \"Book Configuration File Specification\"\n    }\n  ]\n}\n</script>\n\n<style type=\"text/css\">\n  .mini-cover {\n    max-width: 200px;\n  }\n  .blue {\n    color: rgba(59, 130, 246);\n  }\n</style>\n\n<div class=\"container mx-auto full-height\">\n  <div class=\"flex justify-center content-center h-100 text-center\">\n    {#each books[activeLocale] as b}\n    <div class=\"p-2\">\n      <a href=\"/documentation/{activeLocale}/{b.id}/index.html\" target=\"_blank\">\n        <figure class=\"text-center max-w-xs cursor-pointer\">\n          <img\n            class=\"mini-cover mx-auto\"\n            src=\"/documentation/{activeLocale}/{b.id}/{b.cover}\"\n            alt=\"{b.title}\"\n          />\n          <figcaption>{b.title}</figcaption>\n        </figure>\n      </a>\n    </div>\n    {/each}\n  </div>\n  <br />\n  <br />\n  <h3 class=\"font-semibold text-xl blue\">Videos</h3>\n  <ul class=\"list-disc\">\n    <li><a class=\"blue\" href=\"https://youtu.be/rqsmSJY21Vw\" target=\"_blank\">Introduction to Little Webby Press</a></li>\n  </ul>\n  <br>\n  <br>\n  <h3 class=\"font-semibold text-xl blue\">Sample Books</h3>\n  <p>Sample book folders for your reference.</p>\n  <ul class=\"list-disc\">\n    <li><a class=\"blue\" href=\"../../samples/moby-dick.zip\">Moby Dick</a></li>\n  </ul>\n  <br>\n  <br>\n    <h3 class=\"font-semibold text-xl blue\">Generic Template</h3>\n  <p>The <i>generic template</i> used to generate both eBooks and Websites. Use it as a starting point to create your own custom template.</p>\n  <ul class=\"list-disc\">\n    <li><a class=\"blue\" href=\"../../templates.zip\">templates.zip</a></li>\n  </ul>\n</div>\n",
    "<script>\n  import Tabs from \"./Tabs.svelte\"\n  import TabsActions from \"./TabsActions.svelte\"\n  import { getFilesFromDataTransferItems } from \"datatransfer-files-promise\" // it is not unused-var, it attaches itself to window.\n  import { onMount } from \"svelte\"\n  import { bookFromFiles } from \"./book.js\"\n  import { generateEpub } from \"./epub.js\"\n  import { generateSite } from \"./site.js\"\n  import { _ } from \"svelte-i18n\"\n  import { ebookEpub3Generating, staticSiteGenerating} from \"./stores.js\"\n  import { loadManuscriptFromURL} from \"../common/fs.js\"\n\n  let stage = \"waiting\" // loading, loaded, over\n  let msg, files, book\n\n  // function readFile(file) {\n  //  return new Promise((resolve, _reject) => {\n  //    var fr = new FileReader()\n  //    fr.onload = () => {\n  //      resolve(fr.result)\n  //    }\n  //    fr.readAsText(file.blob)\n  //  })\n  // }\n\n  const actionGenerateBook = (_ev) => {\n    generateEpub(book)\n      .catch((n) => {\n        ebookEpub3Generating.set(false)\n        stage = \"error\"\n        msg = n.message ? $_(n.message) : n\n        console.error(\"error generating epub3\", n)\n      })\n  }\n\n  const actionGenerateSite = (_ev) => {\n    generateSite(book)\n      .catch((n) => {\n        staticSiteGenerating.set(false)\n        stage = \"error\"\n        msg = n.message ? $_(n.message) : n\n        console.error(\"error generating site\", n)\n      })\n  }\n\n  const loadFiles = (_evt) => {\n    document.getElementById(\"file-input\").click()\n  }\n\n  const filesLoaded = async (evt) => {\n    evt.preventDefault()\n\n    msg = $_(\"getting-file-list\")\n    stage = \"loading\"\n    files = Array.from(evt.target.files)\n    // FileList does not contain \"filepath\" property like DataTransferItem do.\n    // That property is used by book.js.\n    // It's value is apparently the same as name.\n    files = files.map(i => {\n      i.filepath = i.webkitRelativePath\n      return i\n    })\n\n    msg = $_(\"loading-configuration\")\n    book = await bookFromFiles(files)\n    if (book instanceof Error) {\n      stage = \"error\"\n      msg = $_(book.message)\n    } else {\n      stage = \"loaded\"\n    }\n  }\n\n  onMount(() => {\n\n    window.onunhandledrejection = (e) => {\n      console.log(\"typeof\", typeof e)\n      console.log(\"we got exception, but the app has crashed\", e)\n      stage = \"error\"\n      ebookEpub3Generating.set(false)\n      staticSiteGenerating.set(false)\n      msg = e.reason || e.message || e || \"Unknown error\"\n    }\n\n    // Create Drag & Drop zone.\n    //\n    // The user can drag & drop a folder into LWP to load the manuscript.\n    const dropzone = document.querySelector(\".drop-area\")\n    dropzone.addEventListener(\"dragover\", (evt) => {\n      evt.preventDefault()\n      stage = \"over\"\n    })\n    dropzone.addEventListener(\"dragleave\", (evt) => {\n      evt.preventDefault()\n      stage = \"waiting\"\n    })\n    dropzone.addEventListener(\"drop\", async (evt) => {\n      evt.preventDefault()\n\n      msg = $_(\"getting-file-list\")\n      stage = \"loading\"\n      files = await window.getFilesFromDataTransferItems(evt.dataTransfer.items)\n      console.log(\"files\", files)\n\n      msg = $_(\"loading-configuration\")\n      book = await bookFromFiles(files)\n      if (book instanceof Error) {\n        stage = \"error\"\n        msg = $_(book.message)\n      } else {\n        stage = \"loaded\"\n      }\n    })\n\n    // Load manuscript from URL params.\n    if (location.search) {\n      const params = new URLSearchParams(location.search)\n      const manuscriptURL = params.get(\"url\")\n      const action = params.get(\"action\")\n\n      if (manuscriptURL) {\n        // fetch url\n        console.log(\"loading url:\", manuscriptURL)\n        loadManuscriptFromURL(manuscriptURL)\n      }\n\n      if (action) {\n        // do action\n      }\n    }\n  })\n</script>\n\n<style>\n  .over {\n    border: solid 4px #e3f2fd;\n  }\n\n  .full-height {\n    height: calc(100vh - 48px);\n  }\n</style>\n\n<div class=\"container p-0 mx-auto full-height\">\n  {#if stage === \"error\"}\n    <div\n      class=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\n      relative\"\n      role=\"alert\">\n      <strong class=\"font-bold\">{$_(\"error-quip\")}</strong>\n      <span class=\"block sm:inline\">{@html msg}</span>\n      <span class=\"absolute top-0 bottom-0 right-0 px-4 py-3\">\n      </span>\n    </div>\n    <div\n      class=\"flex justify-center content-center h-100 text-center py-3\"\n      class:over={stage == \"over\"}>\n      <div>\n        <div class=\"empty-icon\">\n          <i class=\"fas fa-book fa-3x\" />\n        </div>\n        <p class=\"text-xl\">{$_(\"no_book\")}</p>\n        <p class=\"text-light\">{$_(\"drag-and-drop-to-start\")}</p>\n        <div class=\"mt-6\">\n          <a class=\"btn btn-blue\" href=\"/help\">\n            {@html $_(\"learn-more-long\")}\n          </a>\n        </div>\n        <div class=\"mt-6\">\n              <span class=\"btn btn-blue\" on:click={loadFiles}>\n                <input type=\"file\" class=\"hidden\" id=\"file-input\" webkitdirectory multiple directory on:change={filesLoaded}>\n                {@html $_(\"load-folder\")}\n              </span>\n            </div>\n      </div>\n    </div>\n  {/if}\n  {#if stage !== \"loaded\"}\n    <div\n      class=\"flex justify-center content-center h-100 text-center\"\n      class:over={stage == \"over\"}>\n      {#if stage == \"over\"}\n        <div>\n          <div class=\"empty-icon\">\n            <i class=\"fas fa-smile-wink fa-3x\" />\n          </div>\n          <p class=\"text-xl\">{$_(\"drop-a-book-folder-here\")}</p>\n        </div>\n      {:else if stage == \"waiting\"}\n        <div>\n          <div class=\"empty-icon\">\n            <i class=\"fas fa-book fa-3x\" />\n          </div>\n          <p class=\"text-xl\">{$_(\"no_book\")}</p>\n          <p class=\"text-light\">{$_(\"drag-and-drop-to-start\")}</p>\n          <div class=\"mt-6\">\n            <a class=\"btn btn-blue\" href=\"/documentation/en/getting-started\">\n              {@html $_(\"learn-more-long\")}\n            </a>\n          </div>\n            <div class=\"mt-6\">\n              <span class=\"btn btn-blue\" on:click={loadFiles}>\n                <input type=\"file\" class=\"hidden\" id=\"file-input\" webkitdirectory multiple directory on:change={filesLoaded}>\n                {@html $_(\"load-folder\")}\n              </span>\n            </div>\n        </div>\n      {:else if stage == \"loading\"}\n        <div>\n          <div class=\"empty-icon\">\n            <i class=\"fas fa-spinner fa-3x fa-spin\" />\n          </div>\n          <p class=\"text-xl\">{$_(\"loading\")}</p>\n          <p class=\"text-light\">{msg}</p>\n        </div>\n      {/if}\n    </div>\n  {:else}\n    <Tabs {book} />\n    <TabsActions\n      on:generateBook={actionGenerateBook}\n      on:generateSite={actionGenerateSite} />\n  {/if}\n</div>\n"
  ],
  "names": [],
  "mappings": "AAqBE,WAAW,eAAC,CAAC,AACX,SAAS,CAAE,KAAK,AAClB,CAAC,AACD,KAAK,eAAC,CAAC,AACL,KAAK,CAAE,KAAK,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,AAC3B,CAAC;AC4GD,KAAK,eAAC,CAAC,AACL,MAAM,CAAE,KAAK,CAAC,GAAG,CAAC,OAAO,AAC3B,CAAC,AAED,YAAY,eAAC,CAAC,AACZ,MAAM,CAAE,KAAK,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,AAC5B,CAAC"
}