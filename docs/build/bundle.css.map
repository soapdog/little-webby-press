{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "..\\..\\Press.svelte"
  ],
  "sourcesContent": [
    "<script>\r\n  import Nav from \"./Nav.svelte\";\r\n  import Editor from \"./Editor.svelte\";\r\n  import { getFilesFromDataTransferItems } from \"datatransfer-files-promise\";\r\n  import { onMount } from \"svelte\";\r\n  import { processDroppedFiles } from \"./utils.js\";\r\n\r\n  let stage = \"waiting\"; // loading, loaded, over\r\n  let msg, files, book;\r\n  let error = false;\r\n\r\n  function readFile(file) {\r\n    return new Promise((resolve, reject) => {\r\n      var fr = new FileReader();\r\n      fr.onload = () => {\r\n        resolve(fr.result);\r\n      };\r\n      fr.readAsText(file.blob);\r\n    });\r\n  }\r\n\r\n  onMount(() => {\r\n    const dropzone = document.querySelector(\".drop-area\");\r\n    dropzone.addEventListener(\"dragover\", evt => {\r\n      evt.preventDefault();\r\n      stage = \"over\";\r\n    });\r\n    dropzone.addEventListener(\"dragleave\", evt => {\r\n      evt.preventDefault();\r\n      stage = \"waiting\";\r\n    });\r\n    dropzone.addEventListener(\"drop\", async evt => {\r\n      evt.preventDefault();\r\n\r\n      msg = \"Getting file list...\";\r\n      stage = \"loading\";\r\n      files = await window.getFilesFromDataTransferItems(\r\n        evt.dataTransfer.items\r\n      );\r\n\r\n      msg = \"Loading configuration...\";\r\n      book = await processDroppedFiles(files);\r\n      if (book instanceof Error) {\r\n        stage = \"error\";\r\n        msg = book.message;\r\n      } else {\r\n        stage = \"loaded\";\r\n      }\r\n    });\r\n  });\r\n</script>\r\n\r\n<style>\r\n  .over {\r\n    border: solid 4px #e3f2fd;\r\n  }\r\n\r\n  .action-items {\r\n    position: fixed;\r\n    bottom: 0px;\r\n  }\r\n\r\n  .full-height {\r\n    height: calc(100vh - 48px);\r\n  }\r\n</style>\r\n\r\n<div\r\n  class=\"container-fluid p-0 mx-auto full-height drop-area\"\r\n  >\r\n\r\n  <Nav />\r\n  {#if error}\r\n    <div class=\"toast\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\">\r\n      <div class=\"toast-header\">\r\n        <img src=\"...\" class=\"rounded mr-2\" alt=\"...\" />\r\n        <strong class=\"mr-auto\">Error</strong>\r\n        <button\r\n          type=\"button\"\r\n          class=\"ml-2 mb-1 close\"\r\n          data-dismiss=\"toast\"\r\n          aria-label=\"Close\">\r\n          <span aria-hidden=\"true\">&times;</span>\r\n        </button>\r\n      </div>\r\n      <div class=\"toast-body\">Error initializing filesystem: {error}</div>\r\n    </div>\r\n  {/if}\r\n  {#if stage !== 'loaded'}\r\n    <div class=\"d-flex justify-content-center align-items-center h-100 text-center\" class:over={stage == 'over'}>\r\n      {#if stage == 'over'}\r\n        <div>\r\n          <div class=\"empty-icon\">\r\n            <i class=\"fas fa-smile-wink fa-3x\" />\r\n          </div>\r\n          <p class=\"empty-title h5\">Drop a book folder here!</p>\r\n        </div>\r\n      {:else if stage == 'waiting'}\r\n        <div>\r\n          <div class=\"empty-icon\">\r\n            <i class=\"fas fa-book fa-3x\" />\r\n          </div>\r\n          <p class=\"empty-title h5\">The book is empty.</p>\r\n          <p class=\"empty-subtitle\">\r\n            Drag &amp; Drop a folder with book data here to start.\r\n          </p>\r\n          <div class=\"empty-action\">\r\n            <button class=\"btn btn-primary\">\r\n              Learn more about how to build books using\r\n              <em>little.webby.press</em>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      {:else if stage == 'loading'}\r\n        <div>\r\n          <div class=\"empty-icon\">\r\n            <i class=\"fas fa-spinner fa-3x fa-spin\" />\r\n          </div>\r\n          <p class=\"empty-title h5\">Loading...</p>\r\n          <p class=\"empty-subtitle\">{msg}</p>\r\n        </div>\r\n      {/if}\r\n    </div>\r\n  {:else}\r\n    <Editor {book} />\r\n  {/if}\r\n</div>\r\n"
  ],
  "names": [],
  "mappings": "AAqDE,KAAK,cAAC,CAAC,AACL,MAAM,CAAE,KAAK,CAAC,GAAG,CAAC,OAAO,AAC3B,CAAC,AAOD,YAAY,cAAC,CAAC,AACZ,MAAM,CAAE,KAAK,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,AAC5B,CAAC"
}